<!-- <link href="css/shared.css?v=1.0.0.16" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
<script src="config/config.js" type="text/javascript"></script>
<script src="js/sitemap.js" type="text/javascript"></script>
<script src="js/data_index.js" type="text/javascript"></script> -->
<style>
    #profiles .profilescontent {
        background-color: var(--gray-blur-40);
        padding: 1em 0;
        color: var(--color-dynamic-1);
        box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 3px 0px, rgba(0, 0, 0, 0.06) 0px 1px 2px 0px;
        border-radius: 0.5em;
        margin: 1em;
    }

    #profiles .profilescontent>div:first-child {
        width: 10em;
    }

    #profiles .profilescontent>div:first-child img {
        border-radius: 50%;
        box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
        width: 8em;
        height: 8em;
        object-fit: contain;
    }

    #profiles .profilescontent>div:not(:first-child) {
        flex: 1;
    }

    #profiles>div>div>div:not(:last-child) {
        padding-bottom: 0.5em;
    }

    #profiles .dvTXT {
        display: flex;
        flex-direction: column;
    }

    #profiles *[name] {
        font-weight: bold;
    }

    #profiles *[name="avatar"] {
        padding: 0 2em;
    }

    #profiles *[name]:not(#profiles *[name="name"], #profiles *[name="avatar"], #profiles *[name="id"]) {
        border-left: var(--border);
        padding-left: 1em;
        font-size: 0.9em;
    }

    #profiles *[name="name"] {
        font-size: 1.5em;
        text-decoration: underline;
        text-transform: capitalize;
    }

    #profiles *[name="name"]:hover,
    #profiles *[name="avatar"]:hover {
        cursor: pointer;
    }

    #profiles *[name="title"],
    #profiles *[name="position"] {
        color: var(--gray-1);
    }

    #profiles *[name]>a {
        color: var(--gray-1);
        text-decoration: none;
    }

    #profiles *[name]>i {
        margin-right: 0.5em;
        color: var(--gray-1);
    }

    @media only screen and (max-width: 600px) {
        #profiles .profilescontent>div:first-child {
            padding-right: 0;
        }

        #profiles .cls-flex {
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        #profiles *[name]:not(#profiles *[name="name"], #profiles *[name="avatar"], #profiles *[name="id"]) {
            border-left: none;
        }

        #profiles *[name="avatar"] {
            padding: 0;
        }
    }
</style>

<div id="profiles" currentpage="1" class="divcontent"></div>

<script>
    soitem = 10;
    $(function () {
        let lang = localStorage.getItem('lang');
        loadItem($('#profiles').attr('currentpage'), soitem, lang, getUrlParameter("department"), getUrlParameter("position-title"));


        $(window).scroll(function () {
            let height = Math.round($('#profiles').height() - 550);
            var currentScroll = $(this).scrollTop();
            if (currentScroll >= height) {
                let pageload = parseInt($('#profiles').attr('currentpage')) + 1;
                loadItem(pageload, soitem, lang, getUrlParameter("department"), getUrlParameter("position-title"));
                $('#profiles').attr('currentpage', pageload)
            }
            previousScroll = currentScroll;
        });
    });
    function loadItem(sotrang, soitem, lang, department = false, position_title = false) {
        if ($('#profiles').attr("max-page") === undefined) {
            let reqjson = {
                "loai": 8,
                "sotrang": sotrang,
                "soitem": soitem,
                "lang": lang,
            };
            if (department != false) reqjson.department = department;
            if (position_title != false) reqjson.position = position_title;
            $.ajax({
                type: 'POST',
                url: uri_api + "store/StoredProcedure",
                data: JSON.stringify(reqjson),
                dataType: "json",
                contentType: "application/json",
                async: false,
                success: function (su) {
                    if (su.message === "success") {
                        if (su.responses.length > 0) {
                            let keys = Object.keys(su.responses[0]);
                            $.map(su.responses, function (i) {
                                let id = i.id;
                                let avatar = i.avatar;
                                let div = $(`<div name="id" userid="${id}" role="${i.role}" class="cls-flex profilescontent">`);
                                div.append(`<div name="avatar" userid="${id}"><img src="${uri_img + avatar}" /></div>`);
                                let divtxt = $(`<div class="dvTXT">`);
                                $.map(keys, function (k) {
                                    if (k !== "id" && k !== "avatar" && k !== "role" && k !== "username" && k !== "language" && k !== "education" && k !== "supervision" && k !== "major" && i[k].length > 0 && i[k].toString().indexOf('<p') === -1) {
                                        if (k === "phone")
                                            divtxt.append(`<div name="${k}" userid="${id}"><i class="fa-solid fa-phone"></i><a href="tel:${i[k]}">${i[k]}</a></div>`);
                                        else if (k === "email")
                                            divtxt.append(`<div name="${k}" userid="${id}"><i class="fa-solid fa-envelope"></i><a href="mailto:${i[k]}">${i[k]}</a></div>`);
                                        else if (k === "name")
                                            divtxt.append(`<div name="${k}" userid="${id}">${i[k]}</div>`);
                                        else
                                            divtxt.append(`<div name="${k}" userid="${id}">${i[k]}</div>`);
                                    }
                                });
                                div.append(divtxt);
                                $('#profiles').append(div);
                            });
                        }
                        else
                            $('#profiles').attr("max-page", "true");
                    }
                },
                error: function (er) {
                    console.log(er)
                }
            });

            $('#profiles *[name="name"], #profiles *[name="avatar"]').click(function (e) {
                e.stopPropagation();
                let userid = $(this).attr('userid');
                // console.log(userid)
                loadPage("profile-single", false, false, false, false, false, false, userid);
            });
        }
    }
</script>